{% comment %}
Smart Breadcrumbs Simple v3.0
A pure standalone implementation with advanced debugging
{% endcomment %}

<script src="{{ 'debug.js' | asset_url }}" defer></script>

<div class="simple-breadcrumb-container" data-version="3.0">
  <nav class="simple-breadcrumb" role="navigation" aria-label="breadcrumbs">
    <ol class="simple-breadcrumb__list">
      <li class="simple-breadcrumb__item">
        <a class="simple-breadcrumb__link" href="/">Home</a>
      </li>

      {% if template contains 'product' %}
        <li class="simple-breadcrumb__item">
          {% if collection %}
            <a class="simple-breadcrumb__link" href="{{ collection.url }}">{{ collection.title }}</a>
          {% else %}
            {% for c in product.collections limit:1 %}
              {% if c.handle != 'all' %}
                <a class="simple-breadcrumb__link" href="{{ c.url }}">{{ c.title }}</a>
              {% endif %}
            {% endfor %}
          {% endif %}
        </li>
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">{{ product.title }}</span>
        </li>
        
      {% elsif template contains 'collection' %}
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">{{ collection.title }}</span>
        </li>
        
      {% elsif template contains 'page' %}
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">{{ page.title }}</span>
        </li>
        
      {% elsif template contains 'blog' %}
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">{{ blog.title }}</span>
        </li>
        
      {% elsif template contains 'article' %}
        <li class="simple-breadcrumb__item">
          <a class="simple-breadcrumb__link" href="{{ blog.url }}">{{ blog.title }}</a>
        </li>
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">{{ article.title }}</span>
        </li>
        
      {% elsif template contains 'cart' %}
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">Cart</span>
        </li>
        
      {% elsif template contains 'search' %}
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">Search: {{ search.terms }}</span>
        </li>
        
      {% else %}
        <li class="simple-breadcrumb__item">
          <span class="simple-breadcrumb__current">{{ page_title }}</span>
        </li>
      {% endif %}
    </ol>
  </nav>

  {% comment %} Advanced Debug Panel (only shows with ?debug_breadcrumbs=true) {% endcomment %}
  {% if request.query_string contains 'debug_breadcrumbs=true' %}
    <div class="simple-breadcrumb-debug">
      <h3>Breadcrumb Debug Info</h3>
      <ul>
        <li><strong>Version:</strong> 3.0</li>
        <li><strong>Template:</strong> {{ template }}</li>
        <li><strong>Path:</strong> {{ request.path }}</li>
        <li><strong>User Agent:</strong> {{ request.headers.HTTP_USER_AGENT }}</li>
        {% if template contains 'product' %}
        <li><strong>Product:</strong> {{ product.title }}</li>
        <li><strong>Has Collection:</strong> {% if collection %}true{% else %}false{% endif %}</li>
        {% if collection %}<li><strong>Collection:</strong> {{ collection.title }}</li>{% endif %}
        {% endif %}
      </ul>
    </div>
  {% endif %}
</div>

<style>
  .simple-breadcrumb-container {
    width: 100%;
    background-color: {{ block.settings.background_color }};
    padding: 10px 15px;
    margin-bottom: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  }
  
  .simple-breadcrumb {
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .simple-breadcrumb__list {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    padding: 0;
    margin: 0;
    list-style: none;
  }
  
  .simple-breadcrumb__item {
    display: flex;
    align-items: center;
  }
  
  .simple-breadcrumb__item:not(:last-child) {
    margin-right: 10px;
  }
  
  .simple-breadcrumb__item:not(:last-child)::after {
    content: "â€º";
    display: inline-block;
    margin-left: 10px;
    color: {{ block.settings.text_color }};
    opacity: 0.5;
  }
  
  .simple-breadcrumb__link {
    color: {{ block.settings.link_color }};
    text-decoration: none;
    font-size: 14px;
    transition: opacity 0.2s ease;
  }
  
  .simple-breadcrumb__link:hover {
    opacity: 0.8;
    text-decoration: underline;
  }
  
  .simple-breadcrumb__current {
    color: {{ block.settings.text_color }};
    font-size: 14px;
    font-weight: 500;
  }

  .simple-breadcrumb-debug {
    margin-top: 20px;
    padding: 15px;
    background-color: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-family: monospace;
    font-size: 12px;
  }

  .simple-breadcrumb-debug h3 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 14px;
  }

  .simple-breadcrumb-debug ul {
    margin: 0;
    padding: 0 0 0 20px;
  }

  @media screen and (max-width: 749px) {
    .simple-breadcrumb-container {
      padding: 8px 10px;
      margin-bottom: 15px;
    }
    
    .simple-breadcrumb__link,
    .simple-breadcrumb__current {
      font-size: 12px;
    }
  }
</style>

{% schema %}
{
  "name": "Simple Breadcrumbs",
  "target": "section",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f6f6f6"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link Color",
      "default": "#0066cc"
    }
  ],
  "presets": [
    {
      "name": "Simple Breadcrumbs",
      "category": "Navigation"
    }
  ]
}
{% endschema %} 