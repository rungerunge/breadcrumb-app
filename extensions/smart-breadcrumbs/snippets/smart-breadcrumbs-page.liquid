{% comment %} Smart Breadcrumbs for general pages {% endcomment %}

{%- style -%}
.smart-breadcrumbs {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    padding: 10px 0;
    margin: 0;
    font-size: var(--breadcrumb-font-size, 14px);
    background-color: rgba(0, 0, 0, 0.03);
    padding: 8px 15px;
    border-radius: 4px;
}

.smart-breadcrumbs__link {
    color: var(--breadcrumb-color, #666);
    text-decoration: none;
    transition: color 0.2s ease;
}

.smart-breadcrumbs__link:hover {
    color: var(--breadcrumb-hover-color, #000);
}

.smart-breadcrumbs__separator {
    margin: 0 8px;
    color: var(--breadcrumb-separator-color, #999);
}

.smart-breadcrumbs__current {
    color: var(--breadcrumb-current-color, #333);
    font-weight: 500;
}

@media screen and (max-width: 768px) {
    .smart-breadcrumbs {
        font-size: var(--breadcrumb-mobile-font-size, 12px);
        padding: 8px 12px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }
    
    .smart-breadcrumbs::-webkit-scrollbar {
        display: none;
    }
    
    .smart-breadcrumbs__separator {
        margin: 0 4px;
    }
}
{%- endstyle -%}

<nav class="smart-breadcrumbs" aria-label="breadcrumb">
    <!-- Home Link -->
    <a href="/" class="smart-breadcrumbs__link">Home</a>
    
    {% if page %}
    <!-- Current Page -->
    <span class="smart-breadcrumbs__separator">/</span>
    <span class="smart-breadcrumbs__current">{{ page.title }}</span>
    {% elsif request.page_type == 'search' %}
    <!-- Search Page -->
    <span class="smart-breadcrumbs__separator">/</span>
    <span class="smart-breadcrumbs__current">Search Results</span>
    {% elsif request.page_type == 'cart' %}
    <!-- Cart Page -->
    <span class="smart-breadcrumbs__separator">/</span>
    <span class="smart-breadcrumbs__current">Cart</span>
    {% elsif request.page_type == '404' %}
    <!-- 404 Page -->
    <span class="smart-breadcrumbs__separator">/</span>
    <span class="smart-breadcrumbs__current">Page Not Found</span>
    {% else %}
    <!-- Fallback for Other Page Types -->
    <span class="smart-breadcrumbs__separator">/</span>
    <span class="smart-breadcrumbs__current">{{ request.page_type | capitalize }}</span>
    {% endif %}
</nav>

{% comment %} Error Handling {% endcomment %}
{% capture debug_info %}
  Page type: {{ request.page_type }}
  Path: {{ request.path }}
  Template: {{ template }}
{% endcapture %} 